<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ù–∞ —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">

  <!-- –§–æ–ª–ª–±—ç–∫ PNG –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ -->
  <link rel="alternate icon" type="image/png" href="/favicon.png">

  <!-- –§–∞–≤–∏–∫–æ–Ω–∫–∞ –¥–ª—è iOS -->
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="stylesheet" href="/main.css">
</head>

<body>
  <div class="container">

    <div class="layout">
      <!-- –°–µ–∫—Ü–∏—è —Ü–∏—Ç–∞—Ç -->
      <div id="quoteContainer" class="quote" hidden>
        <h2>–ó–∞–≥—Ä—É–∑–∫–∞ —Ü–∏—Ç–∞—Ç—ã...</h2>
      </div>

      <!-- –°–µ–∫—Ü–∏—è —á–∞—Ç–∞ -->
      <div class="chat-section">
        <div class="chat-toggle-wrapper">
          <a id="toggleChat" class="chat-toggle">–ü–æ–∫–∞–∑–∞—Ç—å —á–∞—Ç</a>
        </div>

        <div id="chatContainer" style="display: none;">
          <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π -->
          <div class="chat-messages" id="messagesContainer"></div>

          <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–∫—Ä—ã—Ç –¥–ª—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö) -->
          <div id="messageInputContainer" style="display: none;">
            <div class="message-input-container">
              <textarea id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–º–∞–∫—Å. 300 —Å–∏–º–≤–æ–ª–æ–≤)"
                maxlength="300"></textarea>


              <div class="chat-controls">

                <div class="emoji-container">
                  <button id="emojiToggle" type="button">üòä</button>
                  <div class="emoji-panel" id="emojiPanel" style="display: none;">
                    <button class="emoji-button">üòä</button>
                    <button class="emoji-button">üòÇ</button>
                    <button class="emoji-button">üëç</button>
                    <button class="emoji-button">‚ù§Ô∏è</button>
                    <button class="emoji-button">üéâ</button>
                  </div>
                </div>


                <div class="chat-controls-right">
                  <button id="sendMessage" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                  <button id="logoutButton" type="button" class="logout-button">–í—ã–π—Ç–∏</button>
                </div>
              </div>
            </div>
          </div>

          <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º) -->
          <div id="registrationInChatContainer" class="registration">
            <details>
              <summary>–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π <br>–≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—Å—è</summary>
              <form class="registration-form">
                <div class="form-group">
                  <label for="nickname">–ò–º—è <sup>(–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤)</sup></label>
                  <input type="text" id="nickname" name="nickname" required maxlength="60">

                  <p><b><small>–ï—Å–ª–∏ –≤—ã –≤ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏–∏, —Ç–æ –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å <br>–Ω–µ–Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ:</small></b>
                  </p>
                  <ul id="nicknameSuggestions"></ul>
                </div>

                <div class="form-group">
                  <label for="gender">–ü–æ–ª:</label>
                  <select id="gender" name="gender" required>
                    <option value="male">–ú—É–∂—á–∏–Ω–∞</option>
                    <option value="female">–ñ–µ–Ω—â–∏–Ω–∞</option>
                    <option value="other">–û–Ω–æ</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="city">–ì–æ—Ä–æ–¥ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                  <input type="text" id="city" name="city">
                </div>

                <div class="form-group">
                  <label for="captcha">–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2 + 3?</label>
                  <input type="text" id="captcha" name="captcha" required>
                </div>

                <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
              </form>

            </details>


          </div>
        </div>
      </div>


    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—à–∏–±–æ–∫ -->
    <div id="errorContainer"></div>

    <footer class="footer">
      <time class="footer-date"></time>

      <a href="mailto:naxymails@gmail.com">–ù–∞–ø–∏—Å–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É</a>
    </footer>

    <script>
      const currentDate = new Date();
      const days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];
      const day = days[currentDate.getDay()];
      const date = currentDate.toLocaleDateString('ru-RU', {
        day: 'numeric',
        month: 'long',
        year: 'numeric'
      });
      document.querySelector('.footer-date').textContent = `${day}, ${date}`;

    </script>

  </div>

  <!-- –°–∫—Ä–∏–ø—Ç—ã -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase
    const supabaseUrl = 'https://fmxbhdjsynadxhuuanax.supabase.co';
    const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZteGJoZGpzeW5hZHhodXVhbmF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYyNjY1MTQsImV4cCI6MjA1MTg0MjUxNH0.rrcUX19NRsIiLpCAaMT2YE2lP5FSp7qRJ5vC-guWsZs';

    if (typeof window.supabase?.createClient === 'function') {
      const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);
      window.supabase = supabase;
      console.log('Supabase client initialized:', supabase);
    } else {
      console.error('Supabase client creation failed: window.supabase.createClient is not available');
    }
  </script>
  <script src="sync-manager.js"></script>
  <script src="app.js"></script>
</body>

</html>